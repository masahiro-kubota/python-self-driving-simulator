# @package _global_
# Base Experiment Configuration
# This file contains common settings shared across all experiment types

defaults:
  - _self_

# Default execution settings
execution:
  num_episodes: 1
  clock_rate_hz: 100.0
  duration_sec: 200.0
  # Clock type for simulation timing control
  # Currently only "stepped" is supported, but may be extended in the future (e.g., "realtime", "external")
  clock_type: "stepped"

# Default system configuration
system:
  nodes:
    simulator:
      type: "KinematicSimulator"
      rate_hz: ${execution.clock_rate_hz}
      params:
        map_path: ${env.map_path}
        vehicle_params: ${vehicle}
        initial_state: ${env.initial_state}
        obstacles: ${env.obstacles}
    sensor:
      type: "ideal_sensor.sensor_node.IdealSensorNode"
      rate_hz: 50.0

      params:
        vehicle_params: ${vehicle}
        vehicle_color: ${visualization.colors.vehicle}
    logger:
      type: "LoggerNode"
      rate_hz: ${execution.clock_rate_hz}
      params:
        # Must be a file path, not directory
        output_mcap_path: ${postprocess.mcap.output_dir}/simulation.mcap
        map_path: ${env.map_path}
        track_path: ${env.track_path}
        vehicle_params: ${vehicle}
        obstacle_color: ${visualization.colors.obstacle}

        path_color: ${visualization.colors.path}
        map_left_color: ${visualization.colors.map_left}
        map_right_color: ${visualization.colors.map_right}
        global_track_color: ${visualization.colors.global_track}
    supervisor:
      type: "SupervisorNode"
      rate_hz: 10.0
      params:
        goal:
          enabled: true
          x: ${env.goal_position.x}
          y: ${env.goal_position.y}
          radius: ${env.goal_tolerance}
          min_elapsed_time: 20.0
        checkpoints: ${env.checkpoints}
        collision:
          enabled: true
        off_track:
          enabled: true

# Default visualization configuration
visualization:
  colors:
    vehicle: "#3B99DDCC"    # Pure Ice Blue (Brightest focal point)
    obstacle: "#FF5252B3"   # Clear Red
    trajectory: "#4DB6ACCC" # Teal (The active plan)
    lookahead: "#D1C4E9CC"  # Light Purple (Lookahead)
    path: "#3B99DDCC"       # Muted Blue Grey Trail (Actual History)
    map_left: "#B0BEC533"   # Subtle Boundary
    map_right: "#B0BEC51A"  # Very Faint Boundary
    global_track: "#E0E0E026" # Very Faint White (Reference track, like a road marking)

# Default postprocessing configuration
postprocess:
  inputs:
    - ${postprocess.mcap.output_dir}/simulation.mcap
  mlflow:
    enabled: false
    tracking_uri: "http://localhost:5000"
  mcap:
    enabled: true
    output_dir: "${hydra:runtime.output_dir}"
  dashboard:
    enabled: true
    map_path: ${env.map_path}
    vehicle_config_path: "experiment/conf/vehicle/default.yaml"
