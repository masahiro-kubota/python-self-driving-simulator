# Tiny LiDAR Agent Configuration
# 学習済みTiny LiDAR Netを用いたエージェント設定

model_path: "outputs/2025-12-21/21-46-10/tinylidarnet.npy" # 推論用モデルのパス（デフォルト） [str]

nodes:
  sensor:
    type: "ideal_sensor.sensor_node.IdealSensorNode"
    rate_hz: 50.0  # センサー更新レート [Hz]
    priority: 10   # 実行優先度（シミュレータの後に実行）
    params:
      vehicle_params: ${vehicle}
      vehicle_color: ${visualization.colors.vehicle}
  tiny_lidar_net:
    type: "tiny_lidar_net.node.TinyLidarNetNode"
    rate_hz: 50.0 # 推論・制御更新レート（センサーと同じかそれ以下） [Hz]
    priority: 20  # 実行優先度（センサーの後に実行）
    params:
      input_dim: 1080       # 入力次元数(LiDARのビーム数) [次元]
      output_dim: 2         # 出力次元数(加速度+ステアリング、ただしノードではステアリングのみ使用) [次元]
      architecture: "large" # モデルアーキテクチャ名 [str]
      # This path will be overridden via CLI in evaluation
      model_path: ${ad_components.model_path} # モデルパス(CLIで上書き可能) [str]
      fixed_acceleration: 1.0 # 固定加速度(縦方向制御に使用) [m/s^2]
      control_mode: "fixed"   # 制御モード('fixed'で固定加速度+AIステアリング) [str]
      max_range: 30.0         # LiDARの最大検知距離(正規化に使用) [m]
      vehicle_params: ${vehicle}
  pid_controller:
    type: "PIDControllerNode"
    rate_hz: 50.0  # PID制御更新レート [Hz]
    priority: 30   # 実行優先度(Tiny LiDAR Netの後に実行)
    params:
      kp: 1.0       # 比例ゲイン (P)
      ki: 0.0       # 積分ゲイン (I)
      kd: 0.001     # 微分ゲイン (D)
      u_min: -3.0   # 最小制御入力(減速度) [m/s^2]
      u_max: 3.0    # 最大制御入力(加速度) [m/s^2]
      vehicle_params: ${vehicle}
