# MPPI Agent Configuration

nodes:
  sensor:
    type: "ideal_sensor.sensor_node.IdealSensorNode"
    rate_hz: 50.0
    priority: 10  # Execute after simulator
    params:
      vehicle_params: ${vehicle}
      vehicle_color: ${visualization.colors.vehicle}
  control:
    type: "mppi_controller.mppi_controller_node.MPPIControllerNode"
    rate_hz: 10.0
    priority: 20  # Execute after sensor (MPPI is planning+control combined)
    params:
      vehicle_params: ${vehicle}
      track_path: ${env.track_path}
      map_path: ${env.map_path}

      # MPPI Parameters
      horizon: 30
      dt: 0.1
      num_samples: 100
      temperature: 10.0     # Increased for better averaging (smoothness)
      noise_sigma_steering: 0.3 # Increased for better exploration
      seed: 43

      # Obstacle avoidance
      obstacle_cost_weight: 1000.0
      collision_threshold: 0.5

      # Map boundary
      off_track_cost_weight: 10000.0
      position_weight: 50.0  # Increased to keep lane tightly

      # Velocity control
      target_velocity: 5.0  # Target velocity [m/s]

      # Visualization colors
      candidate_color: "#80DEEA26" # Light Cyan (Ethereal light trails)
      optimal_color: "#FFF176FF"   # Solid Yellow (The definitive decision)
