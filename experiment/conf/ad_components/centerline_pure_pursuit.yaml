# Centerline Planner + Pure Pursuit Controller Agent Configuration
# 中心線追従プランナー + Pure Pursuit制御のエージェント設定

nodes:
  sensor:
    type: "ideal_sensor.sensor_node.IdealSensorNode"
    rate_hz: 50.0  # センサー更新レート [Hz]
    priority: 10   # 実行優先度（シミュレータの後に実行）
    params:
      vehicle_params: ${vehicle}
      vehicle_color: ${visualization.colors.vehicle}
  planning:
    type: CenterlinePlannerNode
    rate_hz: 10.0  # プランニング更新レート [Hz]
    priority: 20   # 実行優先度（センサーの後に実行）
    params:
      track_path: ${env.track_path}
      lookahead_points: 100         # 参照する経路点の数 [個]
      trajectory_color: "#4DB6ACCC" # 軌跡の色 (Teal)

  control:
    type: PurePursuitControllerNode
    rate_hz: 30.0  # 制御更新レート [Hz]
    priority: 30   # 実行優先度（プランニングの後に実行）
    params:
      vehicle_params: ${vehicle}
      lookahead_marker_color: "#D1C4E9CC" # 前方注視点マーカーの色 (Deep Purple 100)
      lateral:
        min_lookahead_distance: 2.0   # 最小前方注視距離 [m]
        max_lookahead_distance: 5.0   # 最大前方注視距離 [m]
        lookahead_speed_ratio: 1.5    # 速度に対する注視距離の比率 (distance = ratio * speed) [s]
      longitudinal:
        kp: 1.0       # 比例ゲイン (P)
        ki: 0.0       # 積分ゲイン (I)
        kd: 0.05      # 微分ゲイン (D)
        u_min: -3.0   # 最小制御入力（減速度） [m/s^2]
        u_max: 3.0    # 最大制御入力（加速度） [m/s^2]
